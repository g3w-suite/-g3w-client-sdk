<div>
  <div class="g3w-form-component_header">
  </div>
  <div class="g3w-form-component_body nano">
    <form name="validation" novalidate class="form-horizontal g3w-form nano-content">
        <div class="box box-primary">
          <div class="box-header with-border">
            <h3 class="box-title">{{ state.title}}</h3>
            <div class="box-tools pull-right">
            </div>
          </div>
          <div class="box-body">
            <template v-for="field in state.fields">
              <div v-if="isVisible(field)" class="form-group has-feedback">
                <label :for="field.name" class="col-sm-4 control-label">{{ field.label }}<span v-if="field.validate && field.validate.required">*</span></label>
                <div class="col-sm-8">
                  <input v-if="isSimple(field)" @focus="checkPickLayer" :field="field.name" v-disabled="!isEditable(field)" class="form-control" v-model="field.value" :id="field.name" :placeholder="field.input.label">
                  <textarea v-if="isTextarea(field)" @focus="checkPickLayer" :field="field.name" v-disabled="!isEditable(field)" class="form-control" v-model="field.value" :id="field.name" :placeholder="field.input.label">
                  </textarea>
                  <select v-if="isSelect(field)" @focus="checkPickLayer" :field="field.name" v-disabled="!isEditable(field)" class="form-control" @change="onSelectChange(field, $event)" :value="isSelectOptionsNull(field.value)" :id="field.name" :placeholder="field.input.label">
                    <option v-for="value in field.input.options.values"  :value="isSelectOptionsNull(value.key)" >{{ value.value }}</option>
                  </select>
                  <div v-if="isLayerPicker(field)">
                    <input class="form-control picklayerinput" @click="pickLayer(field)" @change="pickLayerInputChange" :field="field.name" data-toggle="tooltip" :title="'Ottieni il dato da un elemento del layer \'' + layerPickerPlaceHolder(field) + '\' o scrivilo direttamente qui'" v-disabled="!isEditable(field)" v-model="field.value" :id="field.name" :placeholder="'['+layerPickerPlaceHolder(field)+']'">
                    <i class="glyphicon glyphicon-screenshot form-control-feedback" ></i>
                  </div>
                  <div v-if="isRadio(field)">
                    <template v-for="(value,index) in field.input.options.values">
                      <input class="magic-radio" type="radio" :value="value.value" v-model="field.value" :field="field.name" v-disabled="!isEditable(field)" :id="field.name + value.value" :placeholder="value.key">
                      <label :for="field.name + value.value">{{ value.key }}</label>
                    </template>
                  </div>
                  <div v-if="isImage(field)">
                    <i v-if="checkFileSrc(field.value)" class="glyphicon glyphicon glyphicon-trash pull-right link trash" @click="removeImage(field)"></i>
                    <img v-if="checkFileSrc(field.value)" class="photo-preview img-responsive img-thumbnail rounded"  :src="field.value" />
                    <div id="foto-spinner"></div>
                    <input type="file" :name="field.name" :data-url="field.uploadurl" :field="field.name" title="Foto" accept="image/*;capture=camera" class="filestyle" @change="onFileChange(field, null, $event)">
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-4 col-sm-8">
            <div v-if="hasFieldsRequired" style="margin-bottom:10px">
              <span>* Campi richiesti</span>
            </div>
            <span v-for="button in state.buttons">
              <button class="btn " :class="[button.class]" @click.stop.prevent="exec(button.cbk)" v-disabled="!btnEnabled(button)">{{ button.title }}</button>
            </span>
          </div>
        </div>
    </form>
  </div>
</div>